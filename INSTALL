- HOW TO COMPILE ZFOR

* Prerequsite: erlang(>=R11B), gcc(>=3.4), (optional) php(>=5.2), alien
* Steps:
	0. MAKE SURE TO change the content of cfg/erlang.cookie
	1. make PREFIX=/usr/local (Compiling zfor server and client library)
	2. (optional) make PREFIX=/usr/local ext (Compiling PHP extension)
	3. make PREFIX=/usr/local pkg (Make zfor server package)
	4. (optional) make PREFIX=/usr/local ext-pkg (Make zfor PHP package)


- HOW TO INSTALL ZFOR

* For .tgz package:
	1. sudo tar -xzpPf zfor*.tgz
	2. (optional) sudo tar -xzpPf php-zfor*.tgz

* For .deb package:
	1. sudo dpkg -i zfor*.deb
	2. (optional) sudo dpkg -i php-zfor*.deb

* For .rpm package:
	1. sudo rpm -Uvh zfor*.rpm
	2. (optional) sudo rpm -Uvh php-zfor*.rpm


- ZFOR ADMIN

* sudo -u nobody zfor-start (Start zfor server)
* sudo -u nobody zfor-stop (Stop zfor server)
* zfor-conf (Dump current config files read by zfor server)
* zfor-stat (Dump current host status stored in zfor server)
* zfor-host <hostname> (Resolve given hostname through zfor service)
* zfor-shell (Connect to zfor server shell, press ^Gq to quit. Use with care!)


- RELEASE STRUCTURE

	$(PREFIX) 					- Release root (default to /usr/local/)
		+- bin/ 				- Contains all zfor executable/script files
		+- lib/ 				- Contains libzfor.so
		+- include/ 			- Contains libzfor header files
		+- share/
			+- zfor/
				+- ebin/ 		- Contains zfor server beam files
				+- src/ 		- Contains zfor server source files
				+- include/ 	- Contains zfor server common header files
		+- logs/
			+- zfor/ 			- zfor server runtime logging files places here
		+- conf/
			+- zfor/ 			- ERTS setting files for zfor server places here
		+- etc/
			+- zfor/ 			- zfor virtual host config files places here


- NOTES

* In the latest libzfor.so, getaddrinfo() is intercepted and most program using this function should be able to working along with ZFOR by simply preloading libzfor.so. No more need to modifying code to resolve hostnames using zfor_gethostbyname() explicitly. For example:

	$ LD_PRELOAD=/usr/local/lib/libzfor.so curl "http://a.zfor"

But the CURL function in PHP with Suhosin security patch (like the one comes within Ubuntu-release) is an exception. The alternative way to make it working is preloading both libzfor.so and libcurl.so, as the following shows:

	$ LD_PRELOAD="/usr/lib/libcurl.so /usr/local/lib/libzfor.so" php -r '$ch=curl_init("http://xx.zfor");curl_exec($ch);'

